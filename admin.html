<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - CLIQ BOOK</title>
    <meta name="description" content="Admin panel for managing CLIQ BOOK library.">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- ECharts for charts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.4.3/echarts.min.js"></script>

    <!-- Custom Admin CSS -->
    <link rel="stylesheet" href="css/admin.css">

    <style>
        :root {
            --primary: #1a2332;
            --secondary: #f4a261;
            --background: #f1f5f9;
            --sidebar-bg: #1e293b;
            --text: #2d3748;
        }

        * {
            font-family: 'Inter', sans-serif;
        }

        .font-display {
            font-family: 'Playfair Display', serif;
        }
    </style>
</head>
<body class="bg-background">

    <div class="flex h-screen bg-gray-100">
        <!-- Sidebar -->
        <aside class="w-64 bg-sidebar-bg text-white flex-shrink-0">
            <div class="p-6">
                <h1 class="text-2xl font-display font-bold">
                    <a href="index.html"><span class="text-yellow-400">CLIQ</span> BOOK</a>
                </h1>
                <p class="text-sm text-gray-400">Admin Panel</p>
            </div>
            <nav class="mt-4">
                <a href="#dashboard" class="nav-link active">
                    <span class="mr-2">üìä</span> Dashboard
                </a>
                <a href="#ebooks" class="nav-link">
                    <span class="mr-2">üìö</span> Ebooks
                </a>
                <a href="#users" class="nav-link">
                    <span class="mr-2">üë•</span> Users
                </a>
                <a href="#membership" class="nav-link">
                    <span class="mr-2">üí≥</span> Membership
                </a>
                <a href="#settings" class="nav-link">
                    <span class="mr-2">‚öôÔ∏è</span> Settings
                </a>
                <a href="index.html" class="nav-link mt-8 border-t border-gray-700">
                    <span class="mr-2">‚Ü©Ô∏è</span> Back to Site
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 overflow-y-auto">
            <div class="p-8">
                <!-- Dashboard Section -->
                <section id="dashboard" class="page-section">
                    <h2 class="text-3xl font-bold mb-6">Dashboard</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div class="stat-card">
                            <h3 class="text-lg">Total Books</h3>
                            <p id="totalBooks" class="text-4xl font-bold">0</p>
                        </div>
                        <div class="stat-card">
                            <h3 class="text-lg">Total Users</h3>
                            <p id="totalUsers" class="text-4xl font-bold">0</p>
                        </div>
                        <div class="stat-card">
                            <h3 class="text-lg">Premium Members</h3>
                            <p id="premiumMembers" class="text-4xl font-bold">0</p>
                        </div>
                        <div class="stat-card">
                            <h3 class="text-lg">Books Read</h3>
                            <p id="booksRead" class="text-4xl font-bold">0</p>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6">
                        <div class="chart-card">
                            <h3 class="text-lg font-bold mb-4">Book Categories</h3>
                            <div id="categoryChart" style="width: 100%; height: 400px;"></div>
                        </div>
                        <div class="chart-card">
                            <h3 class="text-lg font-bold mb-4">User Growth</h3>
                            <div id="userChart" style="width: 100%; height: 400px;"></div>
                        </div>
                    </div>
                    <div class="mt-6">
                        <h3 class="text-lg font-bold mb-4">Recent Activity</h3>
                        <div id="activityFeed" class="bg-white rounded-lg shadow-md p-4 space-y-4">
                            <!-- Activity items will be inserted here -->
                        </div>
                    </div>
                </section>

                <!-- Ebooks Section -->
                <section id="ebooks" class="page-section hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-3xl font-bold">Ebooks</h2>
                        <button id="addBookBtn" class="btn btn-primary">Add New Book</button>
                    </div>
                    <div class="mb-4 flex items-center space-x-4">
                        <input type="text" id="bookSearch" placeholder="Search books..." class="w-full p-2 border rounded">
                        <button id="exportBooksBtn" class="btn btn-secondary">Export to CSV</button>
                    </div>
                    <div class="table-container">
                        <table id="booksTable" class="min-w-full bg-white">
                            <thead>
                                <tr>
                                    <th>Title</th>
                                    <th>Author</th>
                                    <th>Category</th>
                                    <th>Rating</th>
                                    <th>Access Level</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Book rows will be inserted here -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Users Section -->
                <section id="users" class="page-section hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-3xl font-bold">Users</h2>
                        <button id="addUserBtn" class="btn btn-primary">Add New User</button>
                    </div>
                    <div class="mb-4 flex items-center space-x-4">
                        <input type="text" id="userSearch" placeholder="Search users..." class="w-full p-2 border rounded">
                        <button id="exportUsersBtn" class="btn btn-secondary">Export to CSV</button>
                    </div>
                     <div class="table-container">
                        <table id="usersTable" class="min-w-full bg-white">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Membership</th>
                                    <th>Joined Date</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- User rows will be inserted here -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Membership Section -->
                <section id="membership" class="page-section hidden">
                    <h2 class="text-3xl font-bold mb-6">Membership</h2>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="stat-card">
                            <h3 class="text-lg">Premium Members</h3>
                            <p id="premiumMembersCount" class="text-4xl font-bold">0</p>
                        </div>
                        <div class="stat-card">
                            <h3 class="text-lg">Monthly Recurring Revenue</h3>
                            <p id="mrr" class="text-4xl font-bold">$0</p>
                        </div>
                        <div class="stat-card">
                            <h3 class="text-lg">Annual Recurring Revenue</h3>
                            <p id="arr" class="text-4xl font-bold">$0</p>
                        </div>
                    </div>
                    <div class="table-container mt-6">
                        <h3 class="text-lg font-bold p-4">Premium Members</h3>
                        <table id="premiumMembersTable" class="min-w-full bg-white">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Subscription Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Premium members will be inserted here -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Settings Section -->
                <section id="settings" class="page-section hidden">
                    <h2 class="text-3xl font-bold mb-6">Settings</h2>
                    <div class="bg-white rounded-lg shadow-md p-6">
                        <h3 class="text-lg font-bold text-gray-800 mb-4">Library Settings</h3>
                        <form id="settingsForm">
                            <div>
                                <label for="booksPerPage">Books per page</label>
                                <input type="number" id="booksPerPage" value="20" min="1" max="100">
                            </div>
                            <div class="mt-4">
                                <button type="submit" class="btn btn-primary">Save Settings</button>
                            </div>
                        </form>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Add/Edit Book Modal -->
    <div id="bookModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle" class="text-2xl font-bold">Add New Book</h3>
                <button id="closeModalBtn" class="text-2xl">&times;</button>
            </div>
            <div class="modal-body">
                <form id="bookForm">
                    <input type="hidden" id="bookId">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="title">Title</label>
                            <input type="text" id="title" required>
                        </div>
                        <div>
                            <label for="author">Author</label>
                            <input type="text" id="author" required>
                        </div>
                    </div>
                    <div>
                        <label for="category">Category</label>
                        <select id="category" required>
                            <!-- Options will be populated from categories.json -->
                        </select>
                    </div>
                    <div>
                        <label for="description">Description</label>
                        <textarea id="description" rows="4"></textarea>
                    </div>
                    <div>
                        <label for="bookFile">Book PDF File</label>
                        <input type="file" id="bookFile" accept=".pdf">
                        <span id="currentFile" class="text-sm text-gray-500"></span>
                    </div>
                     <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="coverFile">Cover Image</label>
                            <input type="file" id="coverFile" accept="image/*">
                            <img id="coverPreview" src="" alt="Cover Preview" class="mt-2 h-32"/>
                        </div>
                        <div>
                            <label for="price">Price</label>
                            <input type="number" id="price" step="0.01">
                        </div>
                    </div>
                    <div>
                        <label for="accessLevel">Access Level</label>
                        <select id="accessLevel" required>
                            <option value="free">Free</option>
                            <option value="standard">Standard</option>
                            <option value="premium">Premium</option>
                        </select>
                    </div>
                    <div class="modal-footer">
                        <button type="button" id="deleteBookBtn" class="btn btn-danger hidden">Delete</button>
                        <button type="submit" class="btn btn-primary">Save Book</button>
                    </div>
                </form>
            </div>
        </div>
    </div>


    <!-- Add/Edit User Modal -->
    <div id="userModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="userModalTitle" class="text-2xl font-bold">Edit User</h3>
                <button id="closeUserModalBtn" class="text-2xl">&times;</button>
            </div>
            <div class="modal-body">
                <form id="userForm">
                    <input type="hidden" id="userId">
                    <div>
                        <label for="name">Name</label>
                        <input type="text" id="name" required>
                    </div>
                    <div>
                        <label for="email">Email</label>
                        <input type="email" id="email" required>
                    </div>
                    <div>
                        <label for="membershipStatus">Membership</label>
                        <select id="membershipStatus" required>
                            <option value="free">Free</option>
                            <option value="premium">Premium</option>
                        </select>
                    </div>
                    <div class="flex items-center">
                        <input type="checkbox" id="isAdmin" class="mr-2">
                        <label for="isAdmin">Is Admin</label>
                    </div>
                    <div class="modal-footer">
                        <button type="button" id="deleteUserBtn" class="btn btn-danger hidden">Delete</button>
                        <button type="submit" class="btn btn-primary">Save User</button>
                    </div>
                </form>
            </div>
        </div>
    </div>


    <!-- Toast Notification -->
    <div id="toast" class="toast hidden"></div>

    <!-- Main JS -->
    <script src="main.js"></script>
    <!-- Admin JS -->
    <script src="js/admin.js"></script>
</body>
</html>
